@startuml
participant Control as "Status Control Task"
participant WiFi as "WiFi Task"
participant HTTP as "HTTP Task"
participant JPEG as "JPEG Task"

Note over Control: Initialize LED & Check Handles

Control->>WiFi: Notify Start (TASK_NOTIFY_WIFI_START_BIT)
WiFi-->>Control: Notify Finished (WIFI_FINISHED_BIT)

loop Main Control Loop
    alt WiFi not connected
        Control->>Control: Wait for WiFi Connection
    end

    alt Free Frames Available
        Control->>HTTP: Notify Start (HTTP_START_BIT)
        Note over Control: Set GPIO Reserve

        HTTP-->>Control: Notify Finished (HTTP_FINISHED_BIT)
        Note over Control: Update LED State

        JPEG-->>Control: Notify Finished (JPEG_FINISHED_BIT)
        Note over Control: Clear GPIO Reserve
    else No Free Frames
        Control->>Control: Delay 10ms
    end
end


@enduml